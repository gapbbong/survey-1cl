<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 기초조사 Survey</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <!-- Daum 우편번호 서비스 -->
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>우리 반 친구들을 위한 소중한 기록 💖</h1>
            <p>여러분을 더 잘 이해하고, 한 명 한 명에게 꼭 맞는<br>따뜻한 지도를 하기 위해 선생님이 준비한 공간입니다. (v19)</p>
        </header>

        <!-- 1단계: 본인 확인 -->
        <section id="step-verify" class="card">
            <div class="input-group">
                <label for="student-num">학번 (4자리)</label>
                <div class="flex-row">
                    <input type="number" id="student-num" placeholder="예: 1201" pattern="\d*">
                    <button id="btn-verify" class="primary-btn">조회</button>
                </div>
            </div>
            <div id="verify-result" class="hidden">
                <p class="welcome-msg">안녕하세요, <span id="display-name" class="highlight"></span>님!</p>
                <div class="fraud-warning-mini">
                    ⚠️ 타인의 학번 도용 및 허위 입력은 학교 규정에 따라 불이익을 받을 수 있습니다.
                </div>
                <p>본인이 맞으면 아래 버튼을 눌러주세요.</p>
                <button id="btn-start" class="success-btn">본인 확인 완료</button>
            </div>
        </section>

        <!-- 2단계: 설문 입력 -->
        <section id="step-survey" class="card hidden">
            <form id="survey-form">
                <div class="form-section">
                    <h3>📱 연락처 및 주소</h3>
                    <div class="input-item">
                        <label>학생 연락처</label>
                        <input type="tel" name="학생폰" placeholder="010-0000-0000" required>
                    </div>
                    <div class="input-item">
                        <label>집주소</label>
                        <div class="flex-row" style="margin-bottom: 5px;">
                            <input type="text" name="우편번호" id="zip-code" placeholder="우편번호" style="width: 120px;"
                                readonly>
                            <button type="button" class="primary-btn" id="btn-search-addr"
                                style="width: 80px;">검색</button>
                        </div>
                        <input type="text" name="집주소" id="address-input" placeholder="주소 (검색 버튼을 눌러주세요)" required
                            readonly>
                        <input type="text" name="상세주소" id="detail-address-input" placeholder="상세주소 (예: 101동 1201호)"
                            required style="margin-top: 5px;">
                    </div>
                </div>

                <div class="form-section">
                    <h3>👨‍👩‍👧 가족 관계</h3>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>주보호자 성명 (비상연락망)</label>
                            <input type="text" name="주보호자성명" required>
                        </div>
                        <div class="input-item">
                            <label>학생과의 관계 (주보호자)</label>
                            <select name="주보호자관계" required>
                                <option value="">-- 선택 --</option>
                                <option value="부">부</option>
                                <option value="모">모</option>
                                <option value="조부모">조부모</option>
                                <option value="기타">기타(친척/보호자)</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>
                            주보호자 연락처
                            <button type="button" class="btn-contact" data-target="주보호자연락처">🔍</button>
                        </label>
                        <div class="flex-row">
                            <input type="tel" name="주보호자연락처" required>
                        </div>
                    </div>

                    <div class="grid-row" style="margin-top: 20px; border-top: 1px dashed #eee; padding-top: 20px;">
                        <div class="input-item" style="margin-top: 15px;">
                            <label>보조보호자 성명 (비상연락망)</label>
                            <input type="text" name="보조보호자성명" required>
                        </div>
                        <div class="input-item" style="margin-top: 15px;">
                            <label>학생과의 관계 (보조보호자)</label>
                            <select name="보조보호자관계" required>
                                <option value="">-- 선택 --</option>
                                <option value="부">부</option>
                                <option value="모">모</option>
                                <option value="조부모">조부모</option>
                                <option value="기타">기타(친척/보호자)</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>
                            보조보호자 연락처
                            <button type="button" class="btn-contact" data-target="보조보호자연락처">🔍</button>
                        </label>
                        <div class="flex-row">
                            <input type="tel" name="보조보호자연락처" required>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>형제 관계</label>
                        <input type="text" name="형제" placeholder="예: 2남 1녀 중 첫째, 외동 등" required>
                        <small class="hint-text">(몇남몇녀 중 몇째인지 구체적으로 적어주세요)</small>
                    </div>
                    <div class="input-item">
                        <label>학교 소식을 가장 먼저 전해드릴 분 (주 연락처)</label>
                        <select name="주연락대상" required>
                            <option value="">-- 선택해주세요 --</option>
                            <option value="어머니">어머니</option>
                            <option value="아버지">아버지</option>
                            <option value="조부모님">조부모님</option>
                            <option value="기타(보호자)">기타(보호자)</option>
                        </select>
                        <small class="hint-text">(학교 행사나 상담 시 먼저 연락드릴 분을 알려주세요)</small>
                    </div>
                    <div class="input-item">
                        <label>집에서 나의 이야기를 가장 잘 들어주시는 분</label>
                        <select name="주상담대상" required>
                            <option value="">-- 선택해주세요 --</option>
                            <option value="어머니">어머니</option>
                            <option value="아버지">아버지</option>
                            <option value="형제/자매">형제/자매</option>
                            <option value="조부모님">조부모님</option>
                            <option value="기타">기타</option>
                        </select>
                        <small class="hint-text">(평소 고민이 생겼을 때 가장 먼저 생각나는 가족은 누구인가요?)</small>
                    </div>
                    <div class="input-item">
                        <label>현재 함께 살고 있는 가족 (모두 선택)</label>
                        <div class="checkbox-group grid-row">
                            <label class="checkbox-container">
                                <input type="checkbox" name="거주가족" value="어머니"> 어머니
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="거주가족" value="아버지"> 아버지
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="거주가족" value="조부모님"> 조부모님
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="거주가족" value="형제자매"> 형제자매
                            </label>
                        </div>
                    </div>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>주보호자와의 친밀도</label>
                            <select name="주보호자친밀도" required>
                                <option value="">-- 선택 --</option>
                                <option value="5">⭐⭐⭐⭐⭐ (매우 좋음)</option>
                                <option value="4">⭐⭐⭐⭐ (좋은 편)</option>
                                <option value="3">⭐⭐⭐ (보통)</option>
                                <option value="2">⭐⭐ (서먹함)</option>
                                <option value="1">⭐ (어색함)</option>
                                <option value="0">함께 지내지 않음/해당없음</option>
                            </select>
                        </div>
                        <div class="input-item">
                            <label>보조보호자와의 친밀도</label>
                            <select name="보조보호자친밀도" required>
                                <option value="">-- 선택 --</option>
                                <option value="5">⭐⭐⭐⭐⭐ (매우 좋음)</option>
                                <option value="4">⭐⭐⭐⭐ (좋은 편)</option>
                                <option value="3">⭐⭐⭐ (보통)</option>
                                <option value="2">⭐⭐ (서먹함)</option>
                                <option value="1">⭐ (어색함)</option>
                                <option value="0">함께 지내지 않음/해당없음</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-item text-muted">
                        <small class="hint-text">(위 정보는 선생님이 학생 상담 및 지도를 위해서만 소중히 참고하겠습니다 💖)</small>
                    </div>
                    <div class="input-item">
                        <label>함께 지내는 반려동물 (선택)</label>
                        <input type="text" name="반려동물" placeholder="예: 강아지(초코), 고양이(나비)">
                        <small class="hint-text">(키우는 동물의 종류와 이름을 함께 적어주면 선생님이 더 잘 기억할 수 있어요! 🐾)</small>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🏫 학교 생활</h3>
                    <div class="input-item">
                        <label>성별</label>
                        <select name="성별" required>
                            <option value="">-- 선택 --</option>
                            <option value="남">남</option>
                            <option value="여">여</option>
                        </select>
                    </div>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>출신 중학교</label>
                            <input type="text" name="출신중" placeholder="예: 최고중" required>
                            <small class="hint-text">('학교'는 제외하고 'OO중' 형식으로만 입력해주세요)</small>
                        </div>
                        <div class="input-item">
                            <label>중학교 성적</label>
                            <input type="text" name="중학교성적" placeholder="예: 상위 10%" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🚀 학습 및 진로</h3>
                    <div class="input-item">
                        <label>고등학교 졸업 후 진로</label>
                        <select name="졸업후진로" required>
                            <option value="">-- 선택 --</option>
                            <option value="취업">취업</option>
                            <option value="진학">진학</option>
                            <option value="미정">미정</option>
                        </select>
                    </div>
                    <div class="input-item">
                        <label>나의 꿈 / 희망 직업</label>
                        <input type="text" name="나의꿈" placeholder="예: 로봇 엔지니어" required>
                    </div>
                    <div class="input-item">
                        <label>학습 관련 고민 (선택)</label>
                        <textarea name="학습고민" rows="2" placeholder="공부할 때 특별히 힘든 점이 있다면 적어주세요."></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🎮 관심사와 에너지</h3>
                    <div class="input-item">
                        <label>취미 및 특기</label>
                        <input type="text" name="취미특기" placeholder="예: 축구, 영상 편집, 게임" required>
                    </div>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>자주 하는 게임 (선택)</label>
                            <input type="text" name="자주하는게임" placeholder="예: 리그 오브 레전드, 발로란트">
                        </div>
                        <div class="input-item">
                            <label>게임 실력 (티어/점수) (선택)</label>
                            <input type="text" name="게임실력" placeholder="예: 골드, 2500점">
                        </div>
                    </div>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>좋아하는 음식</label>
                            <input type="text" name="좋아하는 음식" placeholder="예: 떡볶이, 마라탕" required>
                        </div>
                        <div class="input-item">
                            <label>싫어하는 음식</label>
                            <input type="text" name="싫어하는 음식" placeholder="예: 오이, 가지" required>
                        </div>
                    </div>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>잠드는 시간</label>
                            <input type="text" name="잠드는 시간" placeholder="예: 밤 11시" required>
                        </div>
                        <div class="input-item">
                            <label>수면 시간 (양)</label>
                            <input type="text" name="수면시간" placeholder="예: 약 7시간" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🤝 인간관계 및 정서</h3>
                    <div class="input-item">
                        <label>나의 장점 3가지</label>
                        <input type="text" name="나의장점" placeholder="예: 성실함, 잘 웃음, 포기하지 않음" required>
                    </div>
                    <div class="input-item">
                        <label>우리 반/학교에서 친한 친구</label>
                        <input type="text" name="친한친구" placeholder="의지가 되는 친구가 있다면 적어주세요." required>
                    </div>
                    <div class="input-item">
                        <label>MBTI</label>
                        <div class="flex-row">
                            <input type="text" name="MBTI" placeholder="예: ENFP" required>
                        </div>
                        <small class="hint-text">(모르면 E 또는 I만 적어도 좋아요)</small>
                    </div>
                    <div class="input-item">
                        <label>나의 좌우명 (선택)</label>
                        <input type="text" name="좌우명" placeholder="예: 오늘도 최선을 다하자">
                    </div>
                    <div class="input-item">
                        <label>나를 힘들게 하는 것 (요즘 고민) (선택)</label>
                        <textarea name="힘든점" rows="2" placeholder="학교 생활이나 개인적으로 걱정되는 일이 있나요?"></textarea>
                    </div>
                    <div class="input-item">
                        <label>인스타 ID <span class="hint-inline">(부계정도 좋아요!)</span></label>
                        <input type="text" name="인스타 id" placeholder="@username" required>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🙏 종교 및 가치관 (미션스쿨 전용)</h3>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>가족 종교 (선택)</label>
                            <input type="text" name="가족종교" placeholder="예: 기독교, 천주교, 불교, 무교 등">
                        </div>
                        <div class="input-item">
                            <label>나의 종교 활동 정도 (선택)</label>
                            <select name="종교활동">
                                <option value="활동없음">참여 안 함 / 무교</option>
                                <option value="가끔">가끔 참여</option>
                                <option value="보통">어느 정도 성실히 참여</option>
                                <option value="열심">매주 열심 참여 (리더 등)</option>
                                <option value="매우열심">신앙 위주의 삶 (가족 포함)</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>나의 신앙적 고민이나 생각 (선택)</label>
                        <textarea name="종교메시지" rows="2" placeholder="종교와 관련하여 하고 싶은 이야기가 있다면 자유롭게 적어주세요."></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🌏 다문화 가정 (해당하는 경우만)</h3>
                    <div class="input-item">
                        <label>부모님 중 외국 분이 계신가요? (복수 선택 가능)</label>
                        <div class="checkbox-group grid-row" style="margin-bottom: 10px;">
                            <label class="checkbox-container">
                                <input type="checkbox" name="다문화여부" value="해당없음"> 해당 없음
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="다문화여부" value="아버지"> 아버지
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="다문화여부" value="어머니"> 어머니
                            </label>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>어느 나라 분이신가요?</label>
                        <input type="text" name="다문화국가" placeholder="예: 베트남, 필리핀, 일본 등 (해당없으면 빈칸)">
                    </div>
                </div>

                <div class="form-section">
                    <h3>🚌 등교 관련</h3>
                    <div class="input-item">
                        <label>주로 이용하는 등교 수단 (복수 선택 가능)</label>
                        <div class="checkbox-group grid-row">
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="도보"> 도보
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="버스"> 버스
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="지하철"> 지하철
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="부모님차"> 부모님차
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="자전거"> 자전거
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" name="등교수단" value="기타"> 기타
                            </label>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>집에서 학교까지 걸리는 시간 (편도)</label>
                        <div class="flex-row">
                            <input type="number" name="등교시간" placeholder="예: 20" style="width: 100px;">
                            <span style="align-self: center; margin-left: 5px;">분 정도</span>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🏥 건강 및 안전</h3>
                    <div class="grid-row">
                        <div class="input-item">
                            <label>혈액형</label>
                            <select name="혈액형" required>
                                <option value="">-- 선택 --</option>
                                <option value="A">A형</option>
                                <option value="B">B형</option>
                                <option value="O">O형</option>
                                <option value="AB">AB형</option>
                            </select>
                        </div>
                        <div class="input-item">
                            <label>알레르기 / 복용 중인 약</label>
                            <input type="text" name="알레르기" placeholder="예: 복숭아 알레르기, 비염약 (없으면 '없음')" required>
                        </div>
                    </div>
                    <div class="input-item">
                        <label>기타 건강 상의 특이사항</label>
                        <textarea name="건강특이사항" rows="2" placeholder="시력, 청력 등 선생님이 알아야 할 내용 (없으면 '없음'이라고 적어주세요)"
                            required></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>💬 성찰 및 추가 메시지</h3>
                    <div class="input-item">
                        <label>최근 1년간 내가 가장 잘한 일 (성취) (선택)</label>
                        <textarea name="잘한일" rows="2" placeholder="사소한 것이라도 좋으니 내가 자랑스러웠던 순간을 적어주세요."></textarea>
                    </div>
                    <div class="input-item">
                        <label>최근 1년간 내가 가장 후회하거나 고치고 싶은 점 (반성) (선택)</label>
                        <textarea name="못한일" rows="2" placeholder="스스로 돌아보았을 때 아쉬웠던 점이나 태도를 솔직하게 적어주세요."></textarea>
                    </div>
                    <div class="input-item">
                        <label>선생님께 드리고 싶은 말 (비공개) (선택)</label>
                        <textarea name="기타메시지" rows="2"
                            placeholder="선생님이 꼭 알았으면 하는 내용이나 부탁하고 싶은 점이 있다면 자유롭게 적어주세요."></textarea>
                    </div>
                </div>

                <div class="form-section privacy-section">
                    <div class="consent-box">
                        <label class="checkbox-container">
                            <input type="checkbox" id="privacy-consent" required>
                            개인정보 수집 및 이용에 동의합니다.
                        </label>
                        <p class="privacy-note">입력하신 정보는 담임 선생님의 학생 지도 및 상담 목적으로만 사용되며, 안전하게 관리됩니다.</p>
                    </div>
                </div>

                <div id="missing-fields-msg" class="missing-fields-box hidden">
                    <p>⚠️ 다음 필수 항목을 입력해주세요:</p>
                    <ul id="missing-list"></ul>
                </div>

                <button type="submit" id="btn-submit" class="primary-btn submit-btn">설문 제출하기 🚀</button>
            </form>
        </section>

        <section id="step-done" class="card hidden text-center">
            <div class="success-icon">✅</div>
            <h2>제출이 완료되었습니다!</h2>
            <p>선생님께 소중한 정보가 전달되었습니다.<br>감사합니다.</p>
        </section>
    </div>

    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p>처리 중입니다...</p>
    </div>

    <script type="module" src="./script.js"></script>
</body>

</html>